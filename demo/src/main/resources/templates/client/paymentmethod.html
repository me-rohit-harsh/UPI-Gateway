<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Method || Jixwallet</title>
    <!-- bootstrap -->

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v3.0.6/css/line.css">
    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/all.min.css">
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <!-- DataTables -->
    <script src="https://cdn.datatables.net/2.0.2/js/dataTables.js"></script>
    <!-- DataTables SearchBuilder -->
    <script src="https://cdn.datatables.net/searchbuilder/1.7.0/js/dataTables.searchBuilder.js"></script>
    <script src="https://cdn.datatables.net/searchbuilder/1.7.0/js/searchBuilder.dataTables.js"></script>
    <!-- DataTables DateTime -->
    <script src="https://cdn.datatables.net/datetime/1.5.2/js/dataTables.dateTime.min.js"></script>

    <!-- Bootstrap bundled JavaScript -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>

    <script>
        $(document).ready(function () {
            $('#example').DataTable();
        });
        new DataTable('#example', {
            layout: {
                top1: 'searchBuilder'
            }
        });
    </script>
    <!-- DataTables CSS -->
    <link href="https://cdn.datatables.net/2.0.2/css/dataTables.dataTables.css" rel="stylesheet">
    <!-- DataTables SearchBuilder CSS -->
    <link href="https://cdn.datatables.net/searchbuilder/1.7.0/css/searchBuilder.dataTables.css" rel="stylesheet">
    <!-- DataTables DateTime CSS -->
    <link href="https://cdn.datatables.net/datetime/1.5.2/css/dataTables.dateTime.min.css" rel="stylesheet">

    <!-- Custom Styles -->
    <link rel="stylesheet" th:href="@{/css/client/style.css}">

    <style>
        .profile-header {
            text-align: center;
            padding: 20px 0;
        }

        .profile-header img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin-bottom: 10px;
        }

        .profile-header h1 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .profile-header p {
            color: #6c757d;
        }

        .card {
            border: none;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .card-header {
            background-color: rgb(237, 243, 247);
            font-weight: bold;
        }

        .card-body {
            background-color: white;
        }

        .edit-button {
            text-decoration: none;
            color: #007bff;
            font-size: 0.9rem;
            float: right;
        }

        .edit-button:hover {
            color: #0056b3;
        }

        .qr-preview {
            max-width: 100px;
            margin-top: 10px;
        }
        .d-none{
            display: none !important;
        }
    </style>
</head>

<body>
    <div class='dashboard'>
        <div class="dashboard-nav">
            <header><a href="#!" class="menu-toggle"><i class="fas fa-bars"></i></a>
                <!-- <a href="#" class="brand-logo"><i class="fas fa-user"></i> <span>username</span></a> -->
                <!-- <a href="/"><img src="logo2.png" alt="Logo" class="logo"></a> -->
            </header>
            <nav class="dashboard-nav-list">
                <a href="/dashboard" class="dashboard-nav-item "><i class="fas fa-tachometer-alt"></i> Dashboard </a>
                <a href="/profile" class="dashboard-nav-item "><i class="fas fa-user"></i> Profile </a>
                <a href="/credittransaction" class="dashboard-nav-item "><i class="fas fa-file-upload rotate-180"></i>
                    Credit
                    History </a>
                <a href="debittransaction" class="dashboard-nav-item"><i class="fas fa-file-download"></i> Debit History
                </a>
                <a href="refund" class="dashboard-nav-item"><i class="fa-solid fa-list fas"></i> Refund History </a>
                <!-- <div class='dashboard-nav-dropdown'>
                    <a href="#!" class="dashboard-nav-item dashboard-nav-dropdown-toggle"><i
                            class="fas fa-money-check-alt"></i> Payment Method </a>
                    <div class='dashboard-nav-dropdown-menu'>
                        <a href="#" class="dashboard-nav-dropdown-item">Bank Details</a>
                        <a href="#" class="dashboard-nav-dropdown-item">UPI Details</a>
                    </div>
                </div> -->
                <a href="/method" class="dashboard-nav-item"><i class="fas fa-money-check-alt"></i> Payment Method </a>
                <a href="/security" class="dashboard-nav-item"><i class="fas fa-solid fa-fingerprint"></i> Security </a>

                <a href="/p2p" class="dashboard-nav-item"><i class="fas fa-cogs"></i> P2P </a>
                <div class="nav-item-divider"></div>
                <a href="/signout" class="dashboard-nav-item"><i class="fas fa-sign-out-alt"></i> Logout </a>
            </nav>
        </div>
        <div class='dashboard-app'>
            <header class="dashboard-toolbar">
                <a href="#!" class="menu-toggle"><i class="fas fa-bars"></i></a>
                <a href="#" class="brand-logo" style="margin-right: 15px; display: flex; align-items: center;">
                    <i class="fas fa-user" style="font-size: 1.5em; margin-right: 10px;"></i>
                    <div style="display: flex; flex-direction: column;">
                        <span th:text="${user.username}" style="font-weight: bold;"></span>
                        <span th:text="${#dates.format(user.lastLogin, 'yyyy-MM-dd HH:mm:ss')}" style="font-size: 0.8em; color: gray;"></span>
                    </div>
                </a>

            </header>
            <div class='dashboard-content'>
                <div class="container text-center mt-4">
                    <!-- Display flash message if available -->
                    <div th:if="${message}" class="alert alert-success" role="alert">
                        <strong th:text="${message}"></strong>

                    </div>
                    <div th:if="${errorMsg}" class="alert alert-danger" role="alert">
                        <strong th:text="${errorMsg}"></strong>
                    </div>

                </div>



                <div class="container mt-3">
                    <div class="row">
                        <!-- Bank Account Details Card -->
                        <div class="col-12 col-md-6">
                            <div class="card shadow">
                                <div class="card-header">
                                    <h5>Bank Account Details</h5>
                                </div>
                                <div class="card-body p-3">
                                    <form id="bankForm" action="/saveBankDetails" method="post">
                                        <p>Bank Name: <span id="bankNameDisplay" th:text="${user.name}"></span>
                                            <input type="text" id="bankNameInput" name="bankName"
                                                class="form-control d-none" th:value="${user.name}">
                                        </p>
                                        <p>Holder Name: <span id="holderNameDisplay" th:text="${user.name}"></span>
                                            <input type="text" id="holderNameInput" name="holderName"
                                                class="form-control d-none" th:value="${user.name}">
                                        </p>
                                        <p>Account No.: <span id="accountNoDisplay" th:text="${user.name}"></span>
                                            <input type="text" id="accountNoInput" name="accountNo"
                                                class="form-control d-none" th:value="${user.name}">
                                        </p>
                                        <p>IFSC: <span id="ifscDisplay" th:text="${user.name}"></span>
                                            <input type="text" id="ifscInput" name="ifsc" class="form-control d-none"
                                                th:value="${user.name}">
                                        </p>
                                        <p>Branch: <span id="branchDisplay" th:text="${user.name}"></span>
                                            <input type="text" id="branchInput" name="branch"
                                                class="form-control d-none" th:value="${user.name}">
                                        </p>
                                <p>Account Type: <span id="accountTypeDisplay" th:text="${user.username}"></span>
                                    <span id="accountTypeInputs" class="d-none">
                                        <div class="form-check d-none">
                                            <input type="radio" id="saving" name="accountType" value="Saving" class="form-check-input d-none">
                                            <label for="saving" class="form-check-label">Saving</label>
                                        </div>
                                        <div class="form-check d-none">
                                            <input type="radio" id="current" name="accountType" value="Current" class="form-check-input d-none">
                                            <label for="current" class="form-check-label">Current</label>
                                        </div>
                                    </span>
                                </p>
                                        <a href="#" id="editBankButton" class="edit-button"><i class="fas fa-edit"></i>
                                            Edit</a>
                                        <button type="submit" id="saveBankButton"
                                            class="btn btn-primary d-none">Save</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <!-- UPI Details Card -->
                        <div class="col-12 col-md-6">
                            <div class="card shadow ">
                                <div class="card-header">
                                    <h5>UPI Details</h5>
                                </div>
                                <div class="card-body p-3">
                                    <form id="upiForm" action="/saveUpiDetails" method="post">
                                        <p>UPI ID: <span id="upiIdDisplay" th:text="${user.name}"></span>
                                            <input type="text" id="upiIdInput" name="upiId" class="form-control d-none"
                                                th:value="${user.name}">
                                        </p>
                                        <p>Relevant Name: <span id="upiNameDisplay" th:text="${user.name}"></span>
                                            <input type="text" id="upiNameInput" name="upiName"
                                                class="form-control d-none" th:value="${user.name}">
                                        </p>
                                        <p>QR Code:
                                            <span id="qrCodeDisplay">
                                                <img src="path/to/qr-code.png" alt="QR Code" class="qr-preview"
                                                    th:src="${user.name}">
                                            </span>
                                            <input type="file" id="qrCodeInput" name="qrCode"
                                                class="form-control d-none">
                                        </p>
                                        <a href="#" id="editUpiButton" class="edit-button"><i class="fas fa-edit"></i>
                                            Edit</a>
                                        <button type="submit" id="saveUpiButton"
                                            class="btn btn-primary d-none">Save</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>





    <script>
        // for hamburger 
        const mobileScreen = window.matchMedia("(max-width: 990px )");
        $(document).ready(function () {
            $(".dashboard-nav-dropdown-toggle").click(function () {
                $(this).closest(".dashboard-nav-dropdown")
                    .toggleClass("show")
                    .find(".dashboard-nav-dropdown")
                    .removeClass("show");
                $(this).parent()
                    .siblings()
                    .removeClass("show");
            });
            $(".menu-toggle").click(function () {
                if (mobileScreen.matches) {
                    $(".dashboard-nav").toggleClass("mobile-show");
                } else {
                    $(".dashboard").toggleClass("dashboard-compact");
                }
            });
        });
    </script>
    <!-- Bootstrap JS and dependencies -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
 <script>
    document.addEventListener('DOMContentLoaded', function () {
        function toggleEditForm(buttonId, displayClass, inputClass, saveButtonId, checkClass = null) {
            const editButton = document.getElementById(buttonId);
            const saveButton = document.getElementById(saveButtonId);
            const displayElements = document.querySelectorAll(displayClass);
            const inputElements = document.querySelectorAll(inputClass);

            editButton.addEventListener('click', function (e) {
                e.preventDefault();
                displayElements.forEach(el => el.classList.toggle('d-none'));
                inputElements.forEach(el => el.classList.toggle('d-none'));
                if (checkClass) {
                    document.querySelectorAll(checkClass).forEach(el => el.classList.remove('d-none'));
                }
                saveButton.classList.toggle('d-none');
            });
        }

        toggleEditForm('editBankButton', '#bankForm span:not(#accountTypeInputs)', '#bankForm input', 'saveBankButton', '.form-check');
        toggleEditForm('editUpiButton', '#upiForm span, #qrCodeDisplay', '#upiForm input', 'saveUpiButton');
    });
</script>
</body>

</html>